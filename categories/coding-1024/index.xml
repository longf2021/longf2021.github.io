<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>coding 1024 on éš†é£çš„åšå®¢</title><link>https://longfeis.me/categories/coding-1024/</link><description>Recent content in coding 1024 on éš†é£çš„åšå®¢</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><copyright>Longfei.</copyright><lastBuildDate>Fri, 16 Apr 2021 21:32:13 +0800</lastBuildDate><atom:link href="https://longfeis.me/categories/coding-1024/index.xml" rel="self" type="application/rss+xml"/><item><title>golangä¸­çš„deferç¬”è®°</title><link>https://longfeis.me/posts/golang-defer/</link><pubDate>Fri, 16 Apr 2021 21:32:13 +0800</pubDate><guid>https://longfeis.me/posts/golang-defer/</guid><description>å…³é”®ç‚¹ deferæ˜¯åœ¨returnä¹‹å‰æ‰§è¡Œçš„ return è¯­å¥å¹¶ä¸æ˜¯ä¸€æ¡åŸå­æŒ‡ä»¤ï¼Œreturnè¢«æ‹†æˆä¸‰æ¡è¯­å¥ è¿”å›å€¼ = xxx è°ƒç”¨deferå‡½æ•° ç©ºçš„return ä¾‹å­ ğŸ¤” tips: å¯ä»¥æ€è€ƒä¸€ä¸‹ï¼Œç„¶åè¿è¡Œçœ‹çœ‹ ğŸ‘€
func f() (result int) { defer func() { result++ }() return 0 } func f() (r int) { t := 5 defer func() { t = t + 5 }() return t } func f() (r int) { defer func(r int) { r = r + 5 }(r) return 1 } deferä¸é—­åŒ… å¦‚ä¸‹caseä¼šå‡ºç°ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚</description></item><item><title>åŸºäºMySQLçš„rownumä¼ªåˆ—åŠŸèƒ½</title><link>https://longfeis.me/posts/realize-rownum/</link><pubDate>Tue, 16 Mar 2021 23:21:17 +0800</pubDate><guid>https://longfeis.me/posts/realize-rownum/</guid><description>rownumä¼ªåˆ—åŠŸèƒ½ ä¼ªåˆ—çš„å«ä¹‰å°±æ˜¯è¯´ï¼šå®é™…ä¸Šè¯¥åˆ—å¹¶ä¸å­˜åœ¨ï¼Œä½†æ˜¯ä½ å¯ä»¥ç›´æ¥åƒæ­£å¸¸çš„åˆ—ä¸€æ ·ä½¿ç”¨å®ƒã€‚rownumä¼ªåˆ—æ˜¯Oracleç”¨æ¥æ ‡è®°è¿”å›æ•°æ®è¡Œå·çš„ã€‚Oracleä¸­æ²¡æœ‰limitï¼Œé€šè¿‡åœ¨whereæ¡ä»¶ä¸­ä½¿ç”¨rownumä¼ªåˆ—ï¼Œå¯ä»¥è¾¾åˆ°è·ŸMySQLä¸­limitç±»ä¼¼çš„æ•ˆæœã€‚
ä½¿ç”¨æ—¶éœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š
rownumçš„ç”Ÿæˆæ—¶æœºã€‚è·Ÿrownumçª—å£å‡½æ•°ç±»ä¼¼ï¼Œæ˜¯åœ¨æœ€åçš„order byä¹‹å‰ç”Ÿæˆã€‚ whereæ¡ä»¶ä¸­çš„â€œrownum&amp;gt;æ­£æ•´æ•°â€å°†ä¼šå¯¼è‡´selectç»“æœä¸ºç©º rownumæœ€å¸¸è§çš„åº”ç”¨æ˜¯topNï¼Œå³å‰å‡ åçš„åœºæ™¯ï¼Œä½†æ˜¯è¦åŒºåˆ†ä»¥ä¸‹ä¸¤ç§sqlï¼Œå…¶æ•ˆæœæ˜¯å®Œå…¨ä¸ä¸€æ ·çš„ã€‚
-- å¯¹tè¡¨çš„å‰Nè¡Œæ•°æ®æŒ‰æˆç»©æ’åº select rownum, t.* from t where rownum &amp;lt; N order by grade; -- å–å‰Nå select rownum, T.* from (select * from t order by grade) T where rownum &amp;lt; N; æ¶æ„ä¸è®¾è®¡ æ¶æ„ å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œè¿™æ˜¯æˆ‘ç”»çš„ä¸€ä¸ªæ¶æ„å›¾ï¼Œå¾ˆç®€å•çš„ä¸€ä¸ªåŸºäºMySQLçš„åˆ†å¸ƒå¼æ•°æ®åº“çš„å®ç°æ–¹æ¡ˆï¼ˆmaybeä¸­é—´ä»¶ï¼Ÿï¼‰ã€‚å…¶ä¸­ï¼Œgateæ˜¯æ•´ä¸ªç³»ç»Ÿçš„å…¥å£ï¼Œè´Ÿè´£æ ¹æ®meta dataï¼Œå°†sqlè½¬å‘åˆ°åº•ä¸‹çš„MySQLä¸Šã€‚
æˆ‘ä»¬çš„ä»»åŠ¡å°±æ˜¯åœ¨è¿™ä¸ªæ¶æ„ä¸Šå®ç°ç±»ä¼¼Oracleä¸­çš„rownumä¼ªåˆ—çš„åŠŸèƒ½ã€‚
è®¾è®¡ æ€»ä½“æ€æƒ³ï¼šå–åˆ°æ•°æ®ä¹‹åï¼Œåœ¨order byä¹‹å‰ï¼Œä¸ºæ¯è¡ŒåŠ ä¸Šè¡Œå·ï¼Œå¹¶æ ¹æ®whereæ¡ä»¶ä¸­çš„rownumè¡¨è¾¾å¼ï¼Œå®Œæˆæ•°æ®çš„è¿‡æ»¤ã€‚
éœ€è¦æ‹‰å–çš„æ•°æ®å¤ªå¤šï¼Œä½†å®é™…ä¸Šåªéœ€è¦è¾“å‡ºå°‘é‡æ•°æ®
ä½¿ç”¨æµæ¨¡å¼å»æ‹‰å–æ•°æ®
æš‚æœªå®ç°
å°†rownumæ”¹å†™æˆä¸€ä¸ªlimit
å°†rownumè½¬æ¢ä¸ºlimitï¼Œä¸‹æ¨åˆ°æ¯ä¸ªMySQLä¸Šï¼Œæ±‡èšæ•°æ®ä»¥åï¼Œå†åœ¨gateä¸Šå¯¹æ•°æ®è¿›è¡Œæ·»åŠ è¡Œå·çš„æ“ä½œã€‚æ¯”å¦‚ï¼Œselect rownum,t.* from t where rownum&amp;lt;10; æ”¹å†™ä¸º select t.* from t limit 10 ä¸‹æ¨;</description></item></channel></rss>